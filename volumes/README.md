
Quick Guide
--------------------------------------------------------------------------------
Build
```bash
docker build -t hellovol .
```

Run
```bash
docker run hellovol
```

[Volumes](https://docs.docker.com/storage/volumes/)
Volumes are the preferred mechanism for persisting data generated by and used by Docker containers.

If you need to specify volume driver options, you must use --mount.

- `-v` or `--volume`: Consists of three fields, separated by colon characters (:). The fields must be in the correct order, and the meaning of each field is not immediately obvious.
    - In the case of named volumes, the first field is the name of the volume, and is unique on a given host machine. For anonymous volumes, the first field is omitted.
    - The second field is the path where the file or directory are mounted in the container.
    - The third field is optional, and is a comma-separated list of options, such as ro. These options are discussed below.
- `--mount`: Consists of multiple key-value pairs, separated by commas and each consisting of a `<key>=<value>` tuple. The `--mount` syntax is more verbose than `-v` or `--volume`, but the order of the keys is not significant, and the value of the flag is easier to understand.
    - The type of the mount, which can be bind, volume, or tmpfs. This topic discusses volumes, so the type is always volume.
    - The source of the mount. For named volumes, this is the name of the volume. For anonymous volumes, this field is omitted. May be specified as source or src.
    - The destination takes as its value the path where the file or directory is mounted in the container. May be specified as destination, dst, or target.
    - The readonly option, if present, causes the bind mount to be mounted into the container as read-only.
    - The volume-opt option, which can be specified more than once, takes a key-value pair consisting of the option name and its value.

```bash
$ docker service create \
    --mount 'type=volume,src=<VOLUME-NAME>,dst=<CONTAINER-PATH>,volume-driver=local,volume-opt=type=nfs,volume-opt=device=<nfs-server>:<nfs-path>,"volume-opt=o=addr=<nfs-address>,vers=4,soft,timeo=180,bg,tcp,rw"'
    --name myservice \
    <IMAGE>
```

When using volumes with services, only --mount is supported.

Create a volume:
```bash
$ docker volume create my-vol
```

List volumes:
```bash
$ docker volume ls
```

local               my-vol
Inspect a volume:
```bash
$ docker volume inspect my-vol
[
    {
        "Driver": "local",
        "Labels": {},
        "Mountpoint": "/var/lib/docker/volumes/my-vol/_data",
        "Name": "my-vol",
        "Options": {},
        "Scope": "local"
    }
]
```

Remove a volume:
```bash
$ docker volume rm my-vol
```

[Start a container with a volume](https://docs.docker.com/storage/volumes/#start-a-container-with-a-volume)
If you start a container with a volume that does not yet exist, Docker creates the volume for you

Mount
```bash
docker run -d \
  --name testnginxvol \
  --mount source=nginxvol,target=/app \
  nginx:latest
```

Volume
```bash
$ docker run -d \
  --name testnginxvol \
  -v nginxvol:/app \
  nginx:latest
```

Stop the container and remove the volume. Note volume removal is a separate step.

`docker container stop testnginxvol`

`docker container rm testnginxvol`

`docker volume rm nginxvol`

